---
interface Props {
	class?: string;
	opacity?: number;
}

const { class: className = '', opacity = 0.3 } = Astro.props;

// Generate constellation points - a mix of bright stars and subtle ones
const stars = [
	// Main constellation pattern (geometric/Islamic-inspired)
	{ x: 15, y: 20, size: 2, bright: true },
	{ x: 25, y: 35, size: 1.5, bright: true },
	{ x: 35, y: 15, size: 2, bright: true },
	{ x: 45, y: 40, size: 1.5, bright: false },
	{ x: 55, y: 25, size: 2, bright: true },
	{ x: 65, y: 45, size: 1.5, bright: true },
	{ x: 75, y: 20, size: 2, bright: true },
	{ x: 85, y: 35, size: 1.5, bright: false },
	
	// Secondary stars
	{ x: 10, y: 60, size: 1, bright: false },
	{ x: 30, y: 70, size: 1.5, bright: true },
	{ x: 50, y: 65, size: 1, bright: false },
	{ x: 70, y: 75, size: 1.5, bright: true },
	{ x: 90, y: 55, size: 1, bright: false },
	
	// Accent stars
	{ x: 20, y: 85, size: 1, bright: false },
	{ x: 40, y: 90, size: 1.5, bright: false },
	{ x: 60, y: 80, size: 1, bright: true },
	{ x: 80, y: 88, size: 1.5, bright: false },
];

// Connection lines forming subtle geometric patterns
const lines = [
	// Main pattern
	{ x1: 15, y1: 20, x2: 25, y2: 35 },
	{ x1: 25, y1: 35, x2: 35, y2: 15 },
	{ x1: 35, y1: 15, x2: 55, y2: 25 },
	{ x1: 55, y1: 25, x2: 45, y2: 40 },
	{ x1: 55, y1: 25, x2: 75, y2: 20 },
	{ x1: 75, y1: 20, x2: 65, y2: 45 },
	{ x1: 65, y1: 45, x2: 85, y2: 35 },
	
	// Lower connections
	{ x1: 30, y1: 70, x2: 50, y2: 65 },
	{ x1: 50, y1: 65, x2: 70, y2: 75 },
	{ x1: 60, y1: 80, x2: 70, y2: 75 },
];
---

<svg 
	class={`absolute inset-0 w-full h-full pointer-events-none ${className}`}
	preserveAspectRatio="xMidYMid slice"
	viewBox="0 0 100 100"
	style={`opacity: ${opacity}`}
>
	<defs>
		<radialGradient id="starGlow" cx="50%" cy="50%" r="50%">
			<stop offset="0%" stop-color="#f97316" stop-opacity="1" />
			<stop offset="100%" stop-color="#ea580c" stop-opacity="0" />
		</radialGradient>
	</defs>
	
	<!-- Connection lines -->
	{lines.map((line) => (
		<line
			x1={`${line.x1}%`}
			y1={`${line.y1}%`}
			x2={`${line.x2}%`}
			y2={`${line.y2}%`}
			stroke="#f97316"
			stroke-width="0.15"
			stroke-opacity="0.3"
		/>
	))}
	
	<!-- Stars -->
	{stars.map((star) => (
		<circle
			cx={`${star.x}%`}
			cy={`${star.y}%`}
			r={star.size}
			fill={star.bright ? '#f97316' : '#fb923c'}
			opacity={star.bright ? 0.8 : 0.5}
		>
			{star.bright && (
				<animate
					attributeName="opacity"
					values="0.8;0.4;0.8"
					dur={`${3 + Math.random() * 2}s`}
					repeatCount="indefinite"
				/>
			)}
		</circle>
	))}
</svg>
